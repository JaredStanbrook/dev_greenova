{% load obligations_tags %}
<div class="detail-grid">
  <section class="primary-info">
    <h3>Primary Information</h3>
    <dl>
      <dt>Obligation Number</dt>
      <dd>
        {{ obligation.obligation_number }}
      </dd>
      <dt>Project</dt>
      <dd>
        {{ obligation.project_name }}
      </dd>
      <dt>Status</dt>
      <dd>
        {% include "obligations/components/status_badge.html" with status=obligation.status %}
      </dd>
      <dt>Environmental Mechanism</dt>
      <dd>
        {{ obligation.primary_environmental_mechanism|default:"Not specified" }}
      </dd>
      <dt>Environmental Aspect</dt>
      <dd>
        {{ obligation.environmental_aspect|default:"Not specified" }}
      </dd>
      <dt>Obligation</dt>
      <dd>
        {{ obligation.obligation }}
      </dd>
    </dl>
  </section>
  <section class="responsibility">
    <h3>Responsibility</h3>
    <dl>
      <dt>Accountability</dt>
      <dd>
        {{ obligation.accountability|default:"Not assigned" }}
      </dd>
      <dt>Responsibility</dt>
      <dd>
        {{ obligation.responsibility|default:"Not assigned" }}
      </dd>
      <dt>Contact Email</dt>
      <dd>
        {{ obligation.person_email|default:"Not provided" }}
      </dd>
    </dl>
  </section>
  <section class="dates">
    <h3>Important Dates</h3>
    <dl>
      <dt>Due Date</dt>
      <dd>
        {% if obligation.action_due_date %}
          {% include "obligations/components/due_date_indicator.html" with due_date=obligation.action_due_date %}
        {% else %}
          Not set
        {% endif %}
      </dd>
      <dt>Close Out Date</dt>
      <dd>
        {{ obligation.close_out_date|date:"d M Y"|default:"Not completed" }}
      </dd>
    </dl>
  </section>
  {% if obligation.recurring_obligation %}
    <section class="recurring">
      <h3>Recurring Information</h3>
      <dl>
        <dt>Frequency</dt>
        <dd>
          {{ obligation.recurring_frequency|format_frequency }}
        </dd>
        <dt>Next Due Date</dt>
        <dd>
          {{ obligation.recurring_forcasted_date|date:"d M Y"|default:"Not scheduled" }}
        </dd>
      </dl>
    </section>
  {% endif %}
</div>
