{% load static project_tags %}

{% block title %}{{ project.name }}{% endblock %}

{% block main %}
<article>
    <h1>{{ project.name }}</h1>
    {% if project.description %}
      <p>{{ project.description }}</p>
    {% endif %}
    
    <nav>
      <a href="{% url 'projects:edit' project.id %}" role="button" class="outline">Edit</a>
      <button type="button"
              class="outline"
              hx-delete="{% url 'projects:delete' project.id %}"
              hx-confirm="Delete this project?"
              hx-redirect="{% url 'projects:list' %}">Delete</button>
    </nav>

  {% include "projects/components/stats.html" with stats=project.get_analytics %}
  
  <section aria-labelledby="obligations-heading">
    <h2 id="obligations-heading">Obligations</h2>
    {% include "obligations/tables/obligation_list.html" with obligations=obligations %}
  </section>

  <section aria-labelledby="charts-heading">
    <h2 id="charts-heading">Analytics</h2>
    {% include "projects/components/charts.html" with mechanisms=mechanisms %}
  </section>
</article>