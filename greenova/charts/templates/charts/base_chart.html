<figure role="region" aria-label="{{ chart_title }}" class="chart-wrapper">
  <canvas id="{{ chart_id }}"
          class="chart-canvas"
          data-chart-type="{{ chart_type }}"
          data-endpoint="{{ data_endpoint }}">
  </canvas>
  <figcaption>
{{ caption }}
  </figcaption>
  <div class="htmx-indicator" aria-busy="true">
Loading chart data...
  </div>
</figure>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const canvas = document.getElementById('{{ chart_id }}');
        const endpoint = canvas.dataset.endpoint;

        fetch(endpoint)
            .then(response => response.json())
            .then(config => {
                new Chart(canvas, config);
            })
            .catch(error => console.error('Chart initialization error:', error));
    });
</script>
