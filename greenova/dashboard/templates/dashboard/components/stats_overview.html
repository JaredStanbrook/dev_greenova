{% load obligations_tags %}
{% load dashboard_tags %}
{% load static %}
<section class="stats-overview"
         aria-labelledby="stats-heading"
         hx-get="{% url 'dashboard:refresh_stats' %}"
         hx-trigger="load, every {{ refresh_interval }}s"
         hx-swap="innerHTML">
  <h2 id="stats-heading">Overview</h2>
  <div class="grid">
    <article class="stat-card">
      <header>
        <h3>Total Obligations</h3>
      </header>
      <data value="{{ stats.total_items }}"
            class="{{ stats.total_items|status_class }}">{{ stats.total_items|default:"0" }}</data>
    </article>
    <article class="stat-card">
      <header>
        <h3>Due Soon</h3>
      </header>
      <data value="{{ stats.due_soon }}"
            class="{{ stats.due_soon|status_class }}">{{ stats.due_soon|default:"0" }}</data>
    </article>
    <article class="stat-card">
      <header>
        <h3>Overdue</h3>
      </header>
      <data value="{{ stats.overdue }}" class="{{ stats.overdue|status_class }}">{{ stats.overdue|default:"0" }}</data>
    </article>
    <article class="stat-card">
      <header>
        <h3>Completed</h3>
      </header>
      <data value="{{ stats.completed }}"
            class="{{ stats.completed|status_class }}">{{ stats.completed|default:"0" }}</data>
    </article>
  </div>
  <progress class="htmx-indicator" hidden></progress>
</section>
