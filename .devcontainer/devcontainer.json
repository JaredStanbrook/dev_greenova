{
    "name": "Greenova Development",
    "image": "mcr.microsoft.com/devcontainers/python:3",
    "features": {},
    "mounts": [
        "source=${localEnv:HOME}${localEnv:USERPROFILE}/.ssh,target=/home/vscode/.ssh,type=bind,consistency=delegated",
        "source=dotfiles,target=/home/vscode/dotfiles,type=volume"
    ],
    "workspaceMount": "source=dev_greenova,target=${containerWorkspaceFolder},type=volume",
    "workspaceFolder": "/workspaces/${localWorkspaceFolderBasename}",
    "remoteUser": "vscode",
    "containerUser": "vscode",
    "updateRemoteUserUID": true,
    "customizations": {
        "vscode": {
            "settings": {
                "dev.containers.gpuAvailability": "none",
                "dotfiles.repository": "git@github.com:enssol/dotfiles.git",
                "dotfiles.targetPath": "/home/vscode/dotfiles",
                "dotfiles.installCommand": "cd /home/vscode/dotfiles && if [ -f setup.sh ]; then sudo chmod +x setup.sh && sudo ./setup.sh; else echo 'No setup.sh found'; fi",
                "python.interpreter.infoVisibility": "always",
                "python.analysis.nodeExecutable": "/usr/local/share/nvm/versions/node/v23.8.0/bin/node",
                "python.defaultInterpreterPath": "${containerWorkspaceFolder}/.venv/bin/python",
                "python.envFile": "${containerWorkspaceFolder}/.env",
                "python.analysis.extraPaths": [
                    "${containerWorkspaceFolder}/.venv/lib/python3.13/site-packages"
                ],
                "terminal.integrated.cwd": "${containerWorkspaceFolder}",
                "terminal.integrated.defaultProfile.linux": "bash",
                "terminal.integrated.shellIntegration.enabled": true,
                "terminal.integrated.env.linux": {
                    "PYTHONPATH": "${containerWorkspaceFolder}",
                    "VENV_PATH": "${containerWorkspaceFolder}/.venv",
                    "PYTHONSTARTUP": "${containerWorkspaceFolder}/.devcontainer/pythonstartup.py",
                    "PATH": "${containerWorkspaceFolder}/.venv/bin:${containerEnv:PATH}"
                },
                "python.terminal.activateEnvInCurrentTerminal": true,
                "python.terminal.activateEnvironment": true,
                "python.terminal.shellIntegration.enabled": true,
                "files.watcherExclude": {
                    "**/.git/objects/**": true,
                    "**/.git/subtree-cache/**": true,
                    "**/node_modules/**": true,
                    "**/.venv/**": true,
                    "**/__pycache__/**": true,
                    "**/.env": true
                },
                "files.exclude": {
                    "**/.git": true,
                    "**/.svn": true,
                    "**/.hg": true,
                    "**/CVS": true,
                    "**/.DS_Store": true,
                    "**/*.pyc": true,
                    "**/__pycache__": true,
                    "**/.pytest_cache": true,
                    "**/node_modules": true,
                    "**/.venv": true
                }
            },
            "extensions": [
                "ms-python.autopep8",
                "dbaeumer.vscode-eslint",
                "GitHub.copilot",
                "GitHub.copilot-chat",
                "ms-python.vscode-pylance",
                "ms-python.python",
                "ms-python.debugpy",
                "foxundermoon.shell-format",
                "monosans.djlint",
                "EditorConfig.EditorConfig"
            ]
        }
    },
    "postStartCommand": [
        "bash .devcontainer/post_start.sh"
    ],
    "forwardPorts": [
        8000
    ],
    "remoteEnv": {
        "PYTHONPATH": "${containerWorkspaceFolder}",
        "VENV_PATH": "${containerWorkspaceFolder}/.venv",
        "PYTHONSTARTUP": "${containerWorkspaceFolder}/.devcontainer/pythonstartup.py",
        "PATH": "${containerWorkspaceFolder}/.venv/bin:${containerEnv:PATH}"
    }
}